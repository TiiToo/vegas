load("src/vegas.asc") ;

// ---- Unit Test

load("unittests/Application.asc") ;

// ----o Test

var debug = function (e) {
	
	var type = e.getType() ;
	var target = e.getTarget() ;
	var client = e.getContext() ;
	
	trace("> " + type + " : " + target ) ;
	
	switch (type) {
		
		case "onConnect" :
			
			application.acceptConnection(client) ;
			break ;
		
	}
	
}

var gateway = new asgard.server.Gateway() ;
gateway.addGlobalEventListener( new vegas.events.Delegate(this, debug) ) ;

_global.gateway = gateway ;

/*

//trace ("***** running vegas.events.AbstractCoreEventDispatcher") ;

vegas.Gateway.prototype.onConnect = function (client) {
	
	this.acceptConnection(client) ;
	
	//this.rejectConnection(client) ;
	
	this.dispatchEvent( new vegas.events.BasicEvent("onConnect", client, Array.fromArguments(arguments)) ) ;
	
}

*/