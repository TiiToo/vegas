load("src/vegas.asc") ;

// ---- Unit Test

load("unittests/Application.asc") ;

// ---- Test

// Example to use GATEWAY & APPLICATION with commands & FrontController.
// This example is a ALPHA TEST ... don't use this example for the moment please)

Client.prototype.getMessage = function ( msg ) {
	
	return msg ;
	
}

var onDebug = function (e) {
	
	var type = e.getType() ;
	var target = e.getTarget() ;
	var client = e.client ;
	
	switch (type) {
		
		case "onConnect" :
			
			trace("debug > " + type + " : " + client ) ;
			
			asgard.APPLICATION.acceptConnection(client) ;
			// asgard.APPLICATION.rejectConnection(client) ;
			
			break ;
		
		default :
		
			trace("debug > " + type + " : " + target ) ;
		
	}
	
}

var onAction = function ( e ) {

	trace("++++ action type    : " + e.type) ;
	trace("++++ action client : " + e.client) ;
	trace("++++ action context : " + e.context) ;
	
}

EventList = {} ;
EventList.TEST = "test" ;

var action = new vegas.events.Delegate(this, onAction) ;
var debug = new vegas.events.Delegate(this, onDebug) ;

asgard.APPLICATION.addGlobalEventListener( debug ) ;

asgard.GATEWAY.insert( EventList.TEST, action ) ;