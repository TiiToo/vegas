<?xml version="1.0"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html><head><script src="../../../quicknav.js" type="text/javascript"></script><script><!--
document.quicknavBasePath="../../../index-files";
//--></script><link href="../../../style.css" title="JavaDoc" rel="stylesheet" type="text/css"/><link href="../../../unnatural.css" title="Unnatural" rel="alternate stylesheet" type="text/css"/><link href="../../../overview-summary.html" title="Overview" rel="top"/><meta name="generator" content="http://www.badgers-in-foil.co.uk/projects/as2api/"/></head><body><pre><span class="lineno" id="1">     1  </span><span class="comment">/*
<span class="lineno" id="2">     2  </span>
<span class="lineno" id="3">     3  </span>  The contents of this file are subject to the Mozilla Public License Version
<span class="lineno" id="4">     4  </span>  1.1 (the "License"); you may not use this file except in compliance with
<span class="lineno" id="5">     5  </span>  the License. You may obtain a copy of the License at 
<span class="lineno" id="6">     6  </span>  
<span class="lineno" id="7">     7  </span>           http://www.mozilla.org/MPL/ 
<span class="lineno" id="8">     8  </span>  
<span class="lineno" id="9">     9  </span>  Software distributed under the License is distributed on an "AS IS" basis,
<span class="lineno" id="10">    10  </span>  WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
<span class="lineno" id="11">    11  </span>  for the specific language governing rights and limitations under the License. 
<span class="lineno" id="12">    12  </span>  
<span class="lineno" id="13">    13  </span>  The Original Code is Vegas Framework.
<span class="lineno" id="14">    14  </span>  
<span class="lineno" id="15">    15  </span>  The Initial Developer of the Original Code is
<span class="lineno" id="16">    16  </span>  ALCARAZ Marc (aka eKameleon)  &lt;vegas@ekameleon.net&gt;.
<span class="lineno" id="17">    17  </span>  Portions created by the Initial Developer are Copyright (C) 2004-2007
<span class="lineno" id="18">    18  </span>  the Initial Developer. All Rights Reserved.
<span class="lineno" id="19">    19  </span>  
<span class="lineno" id="20">    20  </span>  Contributor(s) :
<span class="lineno" id="21">    21  </span>  
<span class="lineno" id="22">    22  </span>*/</span>
<span class="lineno" id="23">    23  </span>
<span class="lineno" id="24">    24  </span><span class="key">import</span> vegas.core.IComparator;
<span class="lineno" id="25">    25  </span><span class="key">import</span> vegas.data.Collection;
<span class="lineno" id="26">    26  </span><span class="key">import</span> vegas.data.list.ArrayList;
<span class="lineno" id="27">    27  </span><span class="key">import</span> vegas.util.serialize.Serializer;
<span class="lineno" id="28">    28  </span>
<span class="lineno" id="29">    29  </span><span class="comment doc">/**
<span class="lineno" id="30">    30  </span> * A SortedArrayList stores is elements in order with a IComparator object.
<span class="lineno" id="31">    31  </span> * @author eKameleon
<span class="lineno" id="32">    32  </span> */</span>
<span class="lineno" id="33">    33  </span><span class="key">class</span> vegas.data.list.SortedArrayList <span class="key">extends</span> ArrayList 
<span class="lineno" id="34">    34  </span>{
<span class="lineno" id="35">    35  </span>	
<span class="lineno" id="36">    36  </span>	<span class="comment doc">/**
<span class="lineno" id="37">    37  </span>	 * Creates a new SortedArrayList instance. 
<span class="lineno" id="38">    38  </span>	 */</span>
<span class="lineno" id="39">    39  </span>	<span class="key">public</span> <span class="key">function</span> SortedArrayList(o, comp:IComparator, opt:Number) 
<span class="lineno" id="40">    40  </span>	{
<span class="lineno" id="41">    41  </span>		<span class="key">super</span>(o) ;
<span class="lineno" id="42">    42  </span>		setComparator(comp) ;
<span class="lineno" id="43">    43  </span>		setOptions(opt) ;
<span class="lineno" id="44">    44  </span>	}
<span class="lineno" id="45">    45  </span>	
<span class="lineno" id="46">    46  </span>	<span class="comment doc">/**
<span class="lineno" id="47">    47  </span>	 * (read-only) Returns the IComparator instance.
<span class="lineno" id="48">    48  </span>	 */</span>
<span class="lineno" id="49">    49  </span>	<span class="key">public</span> <span class="key">function</span> get comparator():IComparator 
<span class="lineno" id="50">    50  </span>	{
<span class="lineno" id="51">    51  </span>		<span class="key">return</span> getComparator() ;
<span class="lineno" id="52">    52  </span>	}
<span class="lineno" id="53">    53  </span>	
<span class="lineno" id="54">    54  </span>	<span class="comment doc">/**
<span class="lineno" id="55">    55  </span>	 * (read-only) Sets the IComparator instance.
<span class="lineno" id="56">    56  </span>	 */</span>
<span class="lineno" id="57">    57  </span>	<span class="key">public</span> <span class="key">function</span> set comparator(comp:IComparator):Void 
<span class="lineno" id="58">    58  </span>	{
<span class="lineno" id="59">    59  </span>		setComparator(comp) ;
<span class="lineno" id="60">    60  </span>	}
<span class="lineno" id="61">    61  </span>	
<span class="lineno" id="62">    62  </span>	<span class="comment doc">/**
<span class="lineno" id="63">    63  </span>	 * (read-only) Returns the options to sort the elements in the list.
<span class="lineno" id="64">    64  </span>	 */</span>
<span class="lineno" id="65">    65  </span>	<span class="key">public</span> <span class="key">function</span> get options() 
<span class="lineno" id="66">    66  </span>	{
<span class="lineno" id="67">    67  </span>		<span class="key">return</span> getOptions() ;
<span class="lineno" id="68">    68  </span>	}
<span class="lineno" id="69">    69  </span>
<span class="lineno" id="70">    70  </span>	<span class="comment doc">/**
<span class="lineno" id="71">    71  </span>	 * (read-only) Sets the options to sort the elements in the list.
<span class="lineno" id="72">    72  </span>	 */</span>
<span class="lineno" id="73">    73  </span>	<span class="key">public</span> <span class="key">function</span> set options(o):Void 
<span class="lineno" id="74">    74  </span>	{
<span class="lineno" id="75">    75  </span>		setOptions(o) ;
<span class="lineno" id="76">    76  </span>	}
<span class="lineno" id="77">    77  </span>	
<span class="lineno" id="78">    78  </span>	<span class="comment doc">/**
<span class="lineno" id="79">    79  </span>	 * Returns a shallow copy of the instance.
<span class="lineno" id="80">    80  </span>	 * @return a shallow copy of the instance.
<span class="lineno" id="81">    81  </span>	 */</span>
<span class="lineno" id="82">    82  </span>	<span class="key">public</span> <span class="key">function</span> clone() 
<span class="lineno" id="83">    83  </span>	{
<span class="lineno" id="84">    84  </span>		<span class="key">return</span> <span class="key">new</span> SortedArrayList(toArray()) ;
<span class="lineno" id="85">    85  </span>	}
<span class="lineno" id="86">    86  </span>
<span class="lineno" id="87">    87  </span>	<span class="key">public</span> <span class="key">function</span> insert(o):Boolean 
<span class="lineno" id="88">    88  </span>	{
<span class="lineno" id="89">    89  </span>		<span class="key">var</span> b:Boolean = <span class="key">super</span>.insert(o) ;
<span class="lineno" id="90">    90  </span>		_sort() ;
<span class="lineno" id="91">    91  </span>		<span class="key">return</span> b ;
<span class="lineno" id="92">    92  </span>	}	
<span class="lineno" id="93">    93  </span>
<span class="lineno" id="94">    94  </span>	<span class="key">public</span> <span class="key">function</span> insertAll(c:Collection):Boolean 
<span class="lineno" id="95">    95  </span>	{
<span class="lineno" id="96">    96  </span>		<span class="key">var</span> b:Boolean = <span class="key">super</span>.insertAll(c) ;
<span class="lineno" id="97">    97  </span>		_sort() ;
<span class="lineno" id="98">    98  </span>		<span class="key">return</span> b ;
<span class="lineno" id="99">    99  </span>	}
<span class="lineno" id="100">   100  </span>	
<span class="lineno" id="101">   101  </span>	<span class="key">public</span> <span class="key">function</span> insertAt(id <span class="comment">/*Number*/</span> , o):Void 
<span class="lineno" id="102">   102  </span>	{
<span class="lineno" id="103">   103  </span>		insertAt(id, o) ;
<span class="lineno" id="104">   104  </span>		_sort() ;
<span class="lineno" id="105">   105  </span>	}
<span class="lineno" id="106">   106  </span>
<span class="lineno" id="107">   107  </span>	<span class="key">public</span> <span class="key">function</span> insertAllAt(id:Number, c:Collection):Boolean 
<span class="lineno" id="108">   108  </span>	{
<span class="lineno" id="109">   109  </span>		<span class="key">var</span> b:Boolean = <span class="key">super</span>.insertAllAt(id, c) ;
<span class="lineno" id="110">   110  </span>		_sort() ;
<span class="lineno" id="111">   111  </span>		<span class="key">return</span> b ;
<span class="lineno" id="112">   112  </span>	}
<span class="lineno" id="113">   113  </span>
<span class="lineno" id="114">   114  </span>	<span class="comment doc">/**
<span class="lineno" id="115">   115  </span>	 * Returns the IComparator instance.
<span class="lineno" id="116">   116  </span>	 */</span>
<span class="lineno" id="117">   117  </span>	<span class="key">public</span> <span class="key">function</span> getComparator():IComparator 
<span class="lineno" id="118">   118  </span>	{
<span class="lineno" id="119">   119  </span>		<span class="key">return</span> _comparator ;
<span class="lineno" id="120">   120  </span>	}
<span class="lineno" id="121">   121  </span>
<span class="lineno" id="122">   122  </span>	<span class="comment doc">/**
<span class="lineno" id="123">   123  </span>	 * Returns the options to sort the elements in the list.
<span class="lineno" id="124">   124  </span>	 */</span>
<span class="lineno" id="125">   125  </span>	<span class="key">public</span> <span class="key">function</span> getOptions() 
<span class="lineno" id="126">   126  </span>	{
<span class="lineno" id="127">   127  </span>		<span class="key">return</span> _options ;
<span class="lineno" id="128">   128  </span>	}
<span class="lineno" id="129">   129  </span>
<span class="lineno" id="130">   130  </span>	<span class="comment doc">/**
<span class="lineno" id="131">   131  </span>	 * Sets the IComparator instance.
<span class="lineno" id="132">   132  </span>	 */</span>
<span class="lineno" id="133">   133  </span>	<span class="key">public</span> <span class="key">function</span> setComparator(comp:IComparator):Void 
<span class="lineno" id="134">   134  </span>	{
<span class="lineno" id="135">   135  </span>		_comparator = comp ;
<span class="lineno" id="136">   136  </span>	}
<span class="lineno" id="137">   137  </span>
<span class="lineno" id="138">   138  </span>	<span class="comment doc">/**
<span class="lineno" id="139">   139  </span>	 * Sets the options to sort the elements in the list.
<span class="lineno" id="140">   140  </span>	 */</span>
<span class="lineno" id="141">   141  </span>	<span class="key">public</span> <span class="key">function</span> setOptions(o):Void 
<span class="lineno" id="142">   142  </span>	{
<span class="lineno" id="143">   143  </span>		_options = o ;
<span class="lineno" id="144">   144  </span>	}
<span class="lineno" id="145">   145  </span>	
<span class="lineno" id="146">   146  </span>	<span class="comment doc">/**
<span class="lineno" id="147">   147  </span>	 * Sorts the elements in the list.
<span class="lineno" id="148">   148  </span>	 */</span>
<span class="lineno" id="149">   149  </span>	<span class="key">public</span> <span class="key">function</span> sort( compare , options:Number ):Array  
<span class="lineno" id="150">   150  </span>	{
<span class="lineno" id="151">   151  </span>		<span class="key">if</span> (<span class="key">typeof</span>(compare) != <span class="str_const">"function"</span>) <span class="key">return</span> <span class="key">null</span> ;
<span class="lineno" id="152">   152  </span>		<span class="key">if</span> (options) 
<span class="lineno" id="153">   153  </span>		{
<span class="lineno" id="154">   154  </span>			_options = options ;
<span class="lineno" id="155">   155  </span>		}
<span class="lineno" id="156">   156  </span>		<span class="key">var</span> compareFunc:Function = (compare <span class="key">instanceof</span> IComparator) ? compare.compare : compare ;
<span class="lineno" id="157">   157  </span>		<span class="key">return</span> _a.sort(compareFunc , _options) ;
<span class="lineno" id="158">   158  </span>	}
<span class="lineno" id="159">   159  </span>	
<span class="lineno" id="160">   160  </span>	<span class="comment doc">/**
<span class="lineno" id="161">   161  </span>	 * Sorts the elements in the list according to one or more fields in the array.
<span class="lineno" id="162">   162  </span>	 * @param fieldName A string that identifies a field to be used as the sort value, or an array in which the first element represents the primary sort field, the second represents the secondary sort field, and so on.
<span class="lineno" id="163">   163  </span>	 * @param options One or more numbers or names of defined constants, separated by the bitwise OR (|) operator, that change the sorting behavior. The following values are acceptable for the options parameter:
<span class="lineno" id="164">   164  </span>	 * &lt;p&gt;&lt;li&gt;Array.CASEINSENSITIVE or 1&lt;/li&gt;&lt;li&gt;Array.DESCENDING or 2&lt;/li&gt;&lt;li&gt;Array.UNIQUESORT or 4&lt;/li&gt;&lt;li&gt;Array.RETURNINDEXEDARRAY or 8&lt;/li&gt;&lt;li&gt;Array.NUMERIC or 16&lt;/li&gt;&lt;/p&gt;
<span class="lineno" id="165">   165  </span>     * @return The return value depends on whether you pass any parameters : &lt;p&gt;&lt;li&gt;If you specify a value of 4 or Array.UNIQUESORT for the options parameter, and two or more elements being sorted have identical sort fields, a value of 0 is returned and the array is not modified.&lt;/li&gt;&lt;li&gt;If you specify a value of 8 or Array.RETURNINDEXEDARRAY for the options parameter, an array is returned that reflects the results of the sort and the array is not modified.&lt;/li&gt;&lt;li&gt;Otherwise, nothing is returned and the array is modified to reflect the sort order.&lt;/li&gt;&lt;/p&gt;
<span class="lineno" id="166">   166  </span>     */</span>
<span class="lineno" id="167">   167  </span>	<span class="key">public</span> <span class="key">function</span> sortOn( fieldName, options ):Array  
<span class="lineno" id="168">   168  </span>	{
<span class="lineno" id="169">   169  </span>		<span class="key">if</span> (options) _options = options ;
<span class="lineno" id="170">   170  </span>		<span class="key">return</span> _a.sortOn(fieldName, options) ;
<span class="lineno" id="171">   171  </span>	}
<span class="lineno" id="172">   172  </span>	
<span class="lineno" id="173">   173  </span>	<span class="comment">/*override*/</span> <span class="key">public</span> <span class="key">function</span> toSource(indent:Number, indentor:String):String 
<span class="lineno" id="174">   174  </span>	{
<span class="lineno" id="175">   175  </span>		<span class="key">var</span> sA:String = Serializer.toSource(toArray()) ;
<span class="lineno" id="176">   176  </span>		<span class="key">var</span> sB:String = Serializer.toSource(_comparator) ;
<span class="lineno" id="177">   177  </span>		<span class="key">var</span> sC:String = Serializer.toSource(_options) ;
<span class="lineno" id="178">   178  </span>		<span class="key">return</span> Serializer.getSourceOf(<span class="key">this</span>, [sA, sB, sC] ) ;
<span class="lineno" id="179">   179  </span>	}
<span class="lineno" id="180">   180  </span>	
<span class="lineno" id="181">   181  </span>	<span class="key">private</span> <span class="key">var</span> _comparator:IComparator ;
<span class="lineno" id="182">   182  </span>
<span class="lineno" id="183">   183  </span>	<span class="key">private</span> <span class="key">var</span> _options ;
<span class="lineno" id="184">   184  </span>	
<span class="lineno" id="185">   185  </span>	<span class="key">private</span> <span class="key">function</span> _sort():Void 
<span class="lineno" id="186">   186  </span>	{
<span class="lineno" id="187">   187  </span>		sort( _comparator.compare , _options) ;
<span class="lineno" id="188">   188  </span>	}
<span class="lineno" id="189">   189  </span>	
<span class="lineno" id="190">   190  </span>}</pre><ul class="main_nav" id="main_nav"><li><a href="../../../overview-summary.html" title="Overview of API" class="button">Overview</a></li><li><a href="package-summary.html" title="Overview of package vegas.data.list" class="button">Package</a></li><li><a href="SortedArrayList.html" title="Detail of vegas.data.list.SortedArrayList API" class="button">Class</a></li><li><span class="button nav_current">Source</span></li><li><a href="../../../index-files/index.html" title="Alpabetical index of types and members" class="button">Index</a></li></ul><div class="footer"><a href="http://www.badgers-in-foil.co.uk/projects/as2api/" title="ActionScript 2 API Documentation Generator">as2api</a></div></body></html>